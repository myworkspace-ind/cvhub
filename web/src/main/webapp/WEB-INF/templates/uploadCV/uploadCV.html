<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" th:href="@{/resources/uploadCV/uploadCV.css}" />
     <link rel="stylesheet" th:href="@{/resources/home/style.css}"/>
    <title>Upload CV</title>
</head>
<body>
	<div th:replace="~{fragments/header :: header}"></div>
    <div class="container">
        <div class="header">
            <div>
                <h1>Upload CV ƒë·ªÉ c√°c c∆° h·ªôi vi·ªác l√†m t·ª± t√¨m ƒë·∫øn b·∫°n</h1>
                <p>Gi·∫£m ƒë·∫øn 50% th·ªùi gian c·∫ßn thi·∫øt ƒë·ªÉ t√¨m ƒë∆∞·ª£c m·ªôt c√¥ng vi·ªác ph√π h·ª£p</p>
            </div>
            <div class="header-icon">üìÑ</div>
        </div>
        <div class="content">
            <p>B·∫°n ƒë√£ c√≥ s·∫µn CV c·ªßa m√¨nh, ch·ªâ c·∫ßn t·∫£i CV l√™n, h·ªá th·ªëng s·∫Ω t·ª± ƒë·ªông ƒë·ªÅ xu·∫•t CV c·ªßa b·∫°n t·ªõi nh·ªØng nh√† tuy·ªÉn d·ª•ng uy t√≠n. Ti·∫øt ki·ªám th·ªùi gian, t√¨m vi·ªác th√¥ng minh, n·∫Øm b·∫Øt c∆° h·ªôi v√† l√†m ch·ªß ƒë∆∞·ªùng ƒëua ngh·ªÅ nghi·ªáp c·ªßa ch√≠nh m√¨nh.</p>
            <form id="cv-upload-form" th:action="@{/completeCV}" method="post" enctype="multipart/form-data" onsubmit="return validateForm()">
                <div class="upload-area" onclick="document.getElementById('file-upload').click()">
                    <p>T·∫£i l√™n CV t·ª´ m√°y t√≠nh, ch·ªçn ho·∫∑c k√©o th·∫£</p>
                    <p>H·ªó tr·ª£ ƒë·ªãnh d·∫°ng .doc, .docx, pdf c√≥ k√≠ch th∆∞·ªõc d∆∞·ªõi 5MB</p>
                    <input type="file" id="file-upload" name="file" accept=".doc,.docx,.pdf" onchange="updateFileName()">
                    <div id="file-name"></div>
                </div>
                <div id="error-message" style="color: red; display: none; margin: 10px;">Vui l√≤ng ch·ªçn t·ªáp tr∆∞·ªõc khi t·∫£i l√™n.</div>
                <button type="submit" class="upload-button">T·∫£i CV l√™n</button>
            </form>
            <div class="features">
                <div class="feature">
                    <div class="feature-icon">üìù</div>
                    <h3>Nh·∫≠n v·ªÅ c√°c c∆° h·ªôi t·ªët nh·∫•t</h3>
                </div>
                <div class="feature">
                    <div class="feature-icon">üìä</div>
                    <h3>Theo d√µi s·ªë li·ªáu, t·ªëi ∆∞u CV</h3>
                </div>
            </div>
        </div>
    </div>
    <script type="text/javascript" th:src="@{/resources/uploadCV/uploadCV.js}" ></script> 

    <script>
        function updateFileName() {
            var fileInput = document.getElementById('file-upload');
            var fileNameDiv = document.getElementById('file-name');
            if (fileInput.files.length > 0) {
                fileNameDiv.textContent = fileInput.files[0].name;
            } else {
                fileNameDiv.textContent = '';
            }
        }
    
        function validateForm() {
            var fileInput = document.getElementById('file-upload');
            var errorMessage = document.getElementById('error-message');

            // Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ ch·ªçn file ch∆∞a
            if (!fileInput.files || fileInput.files.length === 0) {
                errorMessage.style.display = 'block'; // Hi·ªÉn th·ªã th√¥ng b√°o l·ªói
                return false; // Ng·ª´ng submit form
            }

            // Ki·ªÉm tra ƒë·ªãnh d·∫°ng file (ch·ªâ cho ph√©p .doc, .docx, .pdf)
            var fileName = fileInput.files[0].name;
            var fileExtension = fileName.split('.').pop().toLowerCase();
            
            var allowedExtensions = ['doc', 'docx', 'pdf'];
            if (!allowedExtensions.includes(fileExtension)) {
                errorMessage.style.display = 'block';
                errorMessage.textContent = "Ch·ªâ h·ªó tr·ª£ ƒë·ªãnh d·∫°ng .doc, .docx v√† .pdf. Vui l√≤ng ch·ªçn t·ªáp h·ª£p l·ªá.";
                return false;
            }

            // Ki·ªÉm tra dung l∆∞·ª£ng file (5MB = 5 * 1024 * 1024 bytes)
            var fileSize = fileInput.files[0].size;
            var maxFileSize = 5 * 1024 * 1024; // 5MB in bytes

            if (fileSize > maxFileSize) {
                errorMessage.style.display = 'block';
                errorMessage.textContent = "Dung l∆∞·ª£ng t·ªáp v∆∞·ª£t qu√° 5MB. Vui l√≤ng ch·ªçn t·ªáp nh·ªè h∆°n.";
                return false;
            }
            
            // N·∫øu ƒë√£ ch·ªçn file, ·∫©n th√¥ng b√°o l·ªói
            errorMessage.style.display = 'none';
            return true; // Ti·∫øp t·ª•c submit form
        }
     // ƒê·∫∑t ƒëo·∫°n script n√†y v√†o cu·ªëi trang HTML
        window.onload = function () {
            var fileInput = document.getElementById('file-upload');
            if (fileInput) {
                fileInput.value = ""; // Reset input file
            }

            var fileNameDiv = document.getElementById('file-name');
            if (fileNameDiv) {
                fileNameDiv.textContent = ""; // X√≥a t√™n file hi·ªÉn th·ªã (n·∫øu c√≥)
            }
        };

    </script>
</body>
</html>