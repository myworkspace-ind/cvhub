<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Danh sách công ty</title>
	<link
		href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
		rel="stylesheet">
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
	<link rel="stylesheet" th:href="@{/resources/searchEmployer/style.css}" />
	<link rel="stylesheet" th:href="@{/resources/home/style.css}" />
	
	<th:block th:include="fragments/head"></th:block>
</head>

<body>
	<th:block th:include="fragments/hmenu"></th:block>
    <nav class="navbar">
	    <div class="search-container">
	        <form class="search-form" action="search-employer" method="GET">
	            <input type="text" name="keyword" placeholder="Nhập tên công ty" th:value="${keyword}">
	            <input type="hidden" name="limit" th:value="${limit}"> <!-- Truyền giá trị limit -->
	            <button type="submit">Tìm kiếm</button>
	        </form>
	    </div>
	</nav>

    <div class="employer-list-container">
	    <h2 class="text-center">Danh sách Công Ty</h2>
	    <div class="employer-list">
	        <div th:each="employer : ${employers}" class="employer-card">
	            <img
	                th:src="@{/images/{logoId}(logoId=${employer.logoID})}"
	                alt="Company logo"
	                class="company-logo">
	
	            <div class="card-body">
	                <h3 class="company-name" th:text="${employer.title}"></h3>
	                <!-- Kiểm tra nếu địa chỉ không null, nếu null thì hiển thị dấu gạch ngang -->
	                <p class="location-tag" th:text="${employer.location != null ? 'Địa chỉ: ' + employer.location : 'Địa chỉ: -'}"></p>
	                
	                <!-- Kiểm tra nếu ngày cập nhật không null, nếu null thì hiển thị dấu gạch ngang -->
	                <p class="update-tag" th:text="${employer.modified != null ? 'Ngày cập nhật: ' + #dates.format(employer.modified, 'dd/MM/yyyy') : 'Ngày cập nhật: -'}"></p>
	                
	                <!-- Kiểm tra nếu website không null, nếu null thì hiển thị dấu gạch ngang -->
	                <p class="website-tag" th:text="${employer.website != null ? 'Website: ' + employer.website : 'Website: -'}"></p>
	                
	                <a th:href="@{/organization/{id}(id=${employer.id})}" class="view-details">Chi tiết</a>
	            </div>
	        </div>
	    </div>
	</div>
	
	<nav aria-label="Page navigation" class="mt-5 d-flex justify-content-between align-items-center">
	    <!-- Dropdown chọn số lượng bản ghi -->
	    <div class="d-flex align-items-center">
	        <label for="limit-select" class="me-2">Số lượng mỗi trang:</label>
	        <form class="limit-form" method="GET" action="search-employer">
	            <select id="limit-select" name="limit" onchange="this.form.submit()">
	                <option th:value="5" th:selected="${limit == 5}">5</option>
	                <option th:value="10" th:selected="${limit == 10}">10</option>
	                <option th:value="20" th:selected="${limit == 20}">20</option>
	                <option th:value="50" th:selected="${limit == 50}">50</option>
	            </select>
	            <input type="hidden" name="page" th:value="${currentPage}">
	            <input type="hidden" name="keyword" th:value="${keyword}"> <!-- Giữ từ khóa tìm kiếm -->
	        </form>
	    </div>
	
	    <!-- Phân trang -->
	    <ul class="pagination mb-0">
	        <!-- Previous button -->
			<li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
			    <a class="page-link" th:href="${currentPage > 0} ? @{/search-employer(page=${currentPage - 1}, limit=${limit}, keyword=${keyword})} : '#'" aria-label="Previous">
			        <span aria-hidden="true">&laquo;</span>
			    </a>
			</li>
			
			<!-- Page numbers -->
			<li class="page-item" th:each="pageNum : ${#numbers.sequence(0, totalPages - 1)}" th:classappend="${pageNum == currentPage} ? 'active'">
			    <a class="page-link" th:href="@{/search-employer(page=${pageNum}, limit=${limit}, keyword=${keyword})}" th:text="${pageNum + 1}"></a>
			</li>
			
			<!-- Next button -->
			<li class="page-item" th:classappend="${currentPage == totalPages - 1} ? 'disabled'">
			    <a class="page-link" th:href="${currentPage < totalPages - 1} ? @{/search-employer(page=${currentPage + 1}, limit=${limit}, keyword=${keyword})} : '#'" aria-label="Next">
			        <span aria-hidden="true">&raquo;</span>
			    </a>
			</li>
	    </ul>
	</nav>
</body>

</html>