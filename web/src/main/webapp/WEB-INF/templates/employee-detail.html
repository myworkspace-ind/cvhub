<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Employee List - MyWorkspace</title>
    <th:block th:include="fragments/head"></th:block>

    <link rel="stylesheet" th:href="@{/resources/signInOut/manageCV.css}" />
	<link rel="stylesheet" th:href="@{/resources/home/style.css}" />
</head>
<body>
	<th:block th:include="fragments/hmenu"></th:block>
	
	<div class="page-header">
		<a th:href="@{/employee}"> < Tr·ªü l·∫°i </a>
	</div>
	
	<div class="cv-management-container">
		<div th:if="${successMessage}" class="alert alert-success">
   	 		<span th:text="${successMessage}"></span>
		</div>

		<div class="section" style="margin:0 100px">
	    <div class="column noColor col" style="height: auto;width:auto; padding:0 30px">
		<div class="user-profile">
			<div class="profile-info">
				<h2 class="profile-name">Th√¥ng tin chi ti·∫øt ·ª©ng vi√™n <span th:text="${user.fullName}"></span></h2><br>
				<h4>T√™n ƒë·∫ßy ƒë·ªß: <span th:text="${user.fullName}"></span></h4>
				<h4>Email: <span th:text="${user.email}"></span></h4>
        		<h4>S·ªë ƒëi·ªán tho·∫°i: <span th:text="${user.phone}"></span></h4>
        		<h4>Ng√†y t·∫°o t√†i kho·∫£n: <span th:text="${#dates.format(user.createdDate, 'dd/MM/yyyy HH:mm:ss')}"></span></h4>
			</div>
		</div>
		<div class="user-profile">
			<div class="company-job-list ">
		        <h2>L·ªãch s·ª≠ ·ª©ng tuy·ªÉn </h2><br>
		        <div th:if="${#maps.isEmpty(companyJobsMap)}">
		            <p>·ª®ng vi√™n ch∆∞a ·ª©ng tuy·ªÉn c√¥ng vi·ªác n√†o.</p>
		        </div>
		        <div th:unless="${#maps.isEmpty(companyJobsMap)}">
		            <ul class="list-group">
		                <!-- L·∫∑p qua c√°c c√¥ng ty -->
		                <li class="list-group-item" th:each="entry : ${companyJobsMap}">
		                    <strong><span th:text="${entry.key}"></span></strong> 
		                    <ul>
		                        <!-- L·∫∑p qua c√°c c√¥ng vi·ªác -->
		                        <li th:each="job : ${entry.value}">
		                            <span th:text="'·ª®ng tuy·ªÉn v√†o: ' + ${job.title}"></span> - 
		                            <span th:text="'Ng√†y ' + ${#dates.format(job.createdDate, 'dd/MM/yyyy HH:mm:ss')}"></span>
		                        </li>
		                    </ul>
		                </li>
		            </ul>
		        </div>
		    </div>
		</div>
		</div>
		</div>
		
		
		
		<br><h1 class="text-center mb-4" th:text="'C√°c CV c·ªßa ' + ${user.fullName} + ' ƒë√£ ƒëƒÉng l√™n h·ªá th·ªëng'"></h1>
		<div class="cv-grid">
			<div th:each="cv : ${cvList}" class="cv-card">
				<div class="cv-preview">
					<div class="preview-header">
						<div class="preview-contact-bar">
							<span>üì± <span th:text="${cv.phone}">0888277472</span></span>
							<span>‚úâÔ∏è <span th:text="${cv.email}">email@example.com</span></span>
							<span>üìç <span th:text="${cv.location.name}">TP HCM</span></span>
						</div>
						<div class="preview-name" th:text="${cv.fullName}">Le Dinh Minh</div>
					</div>

					<div class="preview-content">
						<div class="preview-section">
							<div class="preview-section-title">WORK EXPERIENCE</div>
							<div class="preview-section-content" th:text="${cv.experience ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">EDUCATION</div>
							<div class="preview-section-content" th:text="${cv.education ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">SKILLS</div>
							<div class="preview-section-content" th:text="${cv.skills ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">CERTIFICATIONS</div>
							<div class="preview-section-content" th:text="${cv.certifications ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">PROJECTS</div>
							<div class="preview-section-content" th:text="${cv.projects ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">ACTIVITIES</div>
							<div class="preview-section-content" th:text="${cv.activities ?: '-'}"></div>
						</div>
					</div>
				</div>
				<div class="cv-details">
					<h3 class="cv-title" th:text="${cv.fullName}">CV Title</h3>
					<div class="cv-meta">
						<span th:text="${'C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: ' + cv.modifiedDate}"></span>
					</div>
					<div class="cv-actions">
						<div th:if="${cv.isprimary}">
							<button class="action-btn primary-cv" disabled>CV Ch√≠nh</button>
						</div>
						<a th:href="@{'/renderCV/' + ${cv.id}}" class="action-btn">Xem v√† T·∫£i xu·ªëng</a>
						<a th:href="@{'/employee/detail/delete-cv/' + ${cv.id}}" class="action-btn" style="color: red;" onclick="return confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a CV n√†y?');">Xo√°</a>
					</div>
				</div>
			</div>
		</div>

		<!-- <a th:href="@{/uploadCV}" class="create-cv-btn">
			+ T·∫°o m·ªõi
		</a> -->
	</div>
	
	<script th:src="@{/resources/signInOut/manageCV.js}"></script>
	<th:block th:include="fragments/about_dialog"></th:block>
</body>
</html>