<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="UTF-8">
<title>Qu·∫£n l√Ω CV</title>
<link rel="stylesheet" th:href="@{/resources/signInOut/manageCV.css}" />
<link rel="stylesheet" th:href="@{/resources/home/style.css}" />
<th:block th:include="fragments/head"></th:block>
</head>

<body>
	<div th:replace="~{fragments/header :: header}"></div>
	<div class="cv-management-container">
		<div class="user-profile mt-5">
			<!-- 			<div class="profile-avatar"> -->
			<!-- 				<img th:src="@{/resources/image/defaultAv.png}" alt="Profile Picture" class="avatar-img"> -->
			<!-- 			</div> -->
			<img id="avatar" th:src="@{/profile/avatar}" alt="·∫¢nh ƒë·∫°i di·ªán"
				class="rounded-circle img-thumbnail me-3"
				style="width: 52px; height: 52px;">
			<div class="profile-info">
				<h2 class="profile-name">
					Ch√†o b·∫°n tr·ªü l·∫°i, <span th:text="${user.fullName}"></span>
				</h2>

			</div>
			<a href="/profile/settings" class="action-btn"> <span>N√¢ng
					c·∫•p t√†i kho·∫£n</span>
			</a>
		</div>

		<div>
		    <h3>T·ªáp CV m·∫∑c ƒë·ªãnh:</h3>
		    <p th:text="${defaultFileName}"></p>
		</div>
		
		<div class="cv-files">
		    <h3>Danh s√°ch t·ªáp CV:</h3>
		    <div th:each="fileName : ${fileNames}">
		        <div class="cv-file-item">
		            <span th:text="${fileName}"></span> 
		            <!-- N√∫t t·∫£i xu·ªëng -->
		            <form th:action="@{'/CV/download/' + ${encodedFileNames.get(fileName)}}" method="get" style="display: inline;">
		                <button type="submit" class="download-btn">T·∫£i xu·ªëng</button>
		            </form>
		            <form th:action="@{'/CV/delete/' + ${encodedFileNames.get(fileName)}}" method="post" style="display: inline;">
					    <button type="submit" class="delete-btn">X√≥a t·ªáp</button>
					</form>
		            <form th:action="@{'/setDefaultCV/' + ${encodedFileNames.get(fileName)}}" method="post" style="display: inline;">
		                <button type="submit" class="action-btn">Ch·ªçn l√†m t·ªáp m·∫∑c ƒë·ªãnh</button>
		            </form> <br>
		        </div>
		    </div>
		</div>

		<div class="cv-grid">
			<div th:each="cv : ${cvList}" class="cv-card">
				<div class="cv-preview">
					<div class="preview-header">
						<div class="preview-contact-bar">
							<span>üì± <span th:text="${cv.phone}">0888277472</span></span> <span>‚úâÔ∏è
								<span th:text="${cv.email}">email@example.com</span>
							</span> <span>üìç <span th:text="${cv.location.name}">TP
									HCM</span></span>
						</div>
						<div class="preview-name" th:text="${cv.fullName}">Le Dinh
							Minh</div>
					</div>

					<div class="preview-content">
						<div class="preview-section">
							<div class="preview-section-title">WORK EXPERIENCE</div>
							<div class="preview-section-content"
								th:text="${cv.experience ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">EDUCATION</div>
							<div class="preview-section-content"
								th:text="${cv.education ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">SKILLS</div>
							<div class="preview-section-content"
								th:text="${cv.skills ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">CERTIFICATIONS</div>
							<div class="preview-section-content"
								th:text="${cv.certifications ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">PROJECTS</div>
							<div class="preview-section-content"
								th:text="${cv.projects ?: '-'}"></div>
						</div>

						<div class="preview-section">
							<div class="preview-section-title">ACTIVITIES</div>
							<div class="preview-section-content"
								th:text="${cv.activities ?: '-'}"></div>
						</div>
					</div>
				</div>
				<div class="cv-details">
					<h3 class="cv-title" th:text="${cv.fullName}">CV Title</h3>
					<div class="cv-meta">
						<span th:text="${'C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: ' + cv.modifiedDate}"></span>
					</div>
					<div class="cv-actions">
						<div th:if="${cv.isprimary}">
							<button class="action-btn primary-cv" disabled>CV Ch√≠nh</button>
						</div>
						<div th:unless="${cv.isprimary}">
							<form th:action="@{'/cv/' + ${cv.id} + '/setPrimary'}"
								method="post" style="display: inline;">
								<button type="submit" class="action-btn">ƒê·∫∑t l√†m CV
									ch√≠nh</button>
							</form>
						</div>

						<a th:href="@{'/renderCV/' + ${cv.id}}" class="action-btn">Xem
							v√† T·∫£i xu·ªëng</a>
					</div>
				</div>
			</div>
		</div>

		<a th:href="@{/uploadCV}" class="create-cv-btn"> + T·∫°o m·ªõi </a>
	</div>
	<script th:src="@{/resources/signInOut/manageCV.js}"></script>
</body>

</html>